# ğŸ¯ Epic: AI Agent å‰åç«¯é›†æˆ + å¤šæ¨¡å‹è°ƒåº¦ + SimpleMeméª¨æ¶

> **çŠ¶æ€**: â³ è¿›è¡Œä¸­  
> **åˆ›å»ºæ—¶é—´**: 2026-01-20 21:36  
> **æ›´æ–°æ—¶é—´**: 2026-01-20 22:00  
> **æ‰§è¡Œæ—¶é—´**: è¿‡å¤œ (8å°æ—¶)  
> **æ‰§è¡Œ Agent**: Codex + GLM

---

## ğŸ“ ç®€è¿°

å°† refactor_v2 å‰ç«¯è¿æ¥çœŸæ­£çš„ SmartAgent åç«¯ï¼Œå®ç°å¤š AI æ¨¡å‹ååŒå·¥ä½œï¼Œå¹¶å»ºç«‹ SimpleMem è®°å¿†ç³»ç»Ÿå’Œ 6 æ­¥åˆ†ææ¡†æ¶çš„éª¨æ¶ã€‚

åŒ…æ‹¬ï¼š
- å‰ç«¯ AI è¾“å…¥æ¡†è¿æ¥çœŸå® API
- æµå¼å“åº” (çœ‹åˆ° AI "æ‰“å­—")
- TODO è¿›åº¦æ˜¾ç¤º
- å¤šæ¨¡å‹è·¯ç”± (GLM/Grok/Qwen/DeepSeek)
- SimpleMem ç±»å‹å®šä¹‰å’Œéª¨æ¶
- 6 æ­¥åˆ†ææ¡†æ¶éª¨æ¶

---

## âœ… Done Definition

- [ ] å‰ç«¯ AI è¾“å…¥æ¡†èƒ½å‘é€æ¶ˆæ¯åˆ°åç«¯
- [ ] æ”¶åˆ° AI çœŸå®å“åº”å¹¶æ˜¾ç¤º
- [ ] æµå¼å“åº” - çœ‹åˆ° AI "æ‰“å­—" æ•ˆæœ
- [ ] TODO è¿›åº¦ - çœ‹åˆ°å·¥å…·è°ƒç”¨æ­¥éª¤
- [ ] å¤šæ¨¡å‹è·¯ç”± - ä¸åŒä»»åŠ¡ç”¨ä¸åŒæ¨¡å‹
- [ ] SimpleMem ç±»å‹å®šä¹‰å®Œæˆ
- [ ] StockAnalysisFramework 6æ­¥éª¨æ¶å®Œæˆ
- [ ] `pnpm check` é€šè¿‡

---

## ğŸ“Š å­ä»»åŠ¡

| ä»»åŠ¡ | Agent | æè¿° | Phase |
|------|-------|------|-------|
| CDX-000 | ğŸŸ¢ Codex | SSE å¥‘çº¦å®šä¹‰ (shared/types/stream.ts) | P0 |
| GLM-001 | ğŸ”µ GLM | FloatingAIChatInput è¿æ¥çœŸå® API | P1 |
| GLM-002 | ğŸ”µ GLM | AIChatPanel åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç† | P1 |
| CDX-001 | ğŸŸ¢ Codex | useAIStream hook å®ç° | P1 |
| CDX-002 | ğŸŸ¢ Codex | åç«¯ SSE æµå¼ç«¯ç‚¹ | P1 |
| CDX-003 | ğŸŸ¢ Codex | å¤šæ¨¡å‹è·¯ç”±ç³»ç»Ÿ model-router.ts | P2 |
| CDX-004 | ğŸŸ¢ Codex | é›†æˆå¤šæ¨¡å‹åˆ° llm.ts | P2 |
| GLM-003 | ğŸ”µ GLM | Orchestrator æ¨¡å‹é€‰æ‹©å¢å¼º | P3 |
| CDX-005 | ğŸŸ¢ Codex | SimpleMem ç±»å‹å®šä¹‰ | P4 |
| CDX-006 | ğŸŸ¢ Codex | AnalysisMemoryManager éª¨æ¶ | P4 |
| CDX-007 | ğŸŸ¢ Codex | ç”¨æˆ·ç”»åƒç³»ç»Ÿ (UserProfile + ProfileManager) | P4 |
| GLM-004 | ğŸ”µ GLM | StockAnalysisFramework 6æ­¥éª¨æ¶ | P4 |

---

## ğŸ”„ æ‰§è¡Œé¡ºåº

```
Phase 0 (Codex å…ˆè¡Œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDX-000: SSE å¥‘çº¦å®šä¹‰ (shared/types/stream.ts)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 1 (å¹¶è¡Œæ‰§è¡Œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸ¢ Codex: CDX-001 useAIStream + CDX-002 SSE ç«¯ç‚¹          â”‚
â”‚  ğŸ”µ GLM:   GLM-001 å‰ç«¯è¿æ¥ + GLM-002 åŠ è½½çŠ¶æ€             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 2 (Codex) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDX-003: model-router.ts                                  â”‚
â”‚  CDX-004: llm.ts é›†æˆ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 3 (GLM) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GLM-003: Orchestrator æ¨¡å‹é€‰æ‹©                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 4 (å¹¶è¡Œæ‰§è¡Œ - éª¨æ¶) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸ¢ Codex: CDX-005 SimpleMem + CDX-006 Manager + CDX-007 ç”¨æˆ·ç”»åƒ â”‚
â”‚  ğŸ”µ GLM:   GLM-004 StockAnalysisFramework 6æ­¥éª¨æ¶                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶æ‰€æœ‰æƒ

### ğŸ”µ GLM è´Ÿè´£
- `client/src/refactor_v2/components/FloatingAIChatInput.tsx`
- `client/src/refactor_v2/components/AIChatPanel.tsx`
- `client/src/refactor_v2/stores/aiChat.store.ts`
- `server/_core/agent/orchestrator.ts`

### ğŸŸ¢ Codex è´Ÿè´£
- `client/src/refactor_v2/api/useAIStream.ts` (æ–°å»º)
- `server/routers/ai.ts`
- `server/_core/model-router.ts` (æ–°å»º)
- `server/_core/llm.ts`

### âš ï¸ ç¦æ­¢äº¤å‰ä¿®æ”¹

---

## ğŸ“‚ ä»»åŠ¡æŒ‡å—

- **GLM ä»»åŠ¡æŒ‡å—**: `glm/GLM-TASK-GUIDE.md`
- **Codex ä»»åŠ¡æŒ‡å—**: `codex/CODEX-TASK-GUIDE.md`

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

æ‰€æœ‰ API Key å·²ç¡®è®¤é…ç½®:
- âœ… `GLM_API_KEY` - æ™ºè°± GLM-4.7
- âœ… `GROK_API_KEY` - xAI Grok-4.1
- âœ… `SILICONFLOW_API_KEY` - ç¡…åŸºæµåŠ¨ (Qwen/DeepSeek)

---

**ç»´æŠ¤è€…**: Antigravity  
**æœ€åæ›´æ–°**: 2026-01-20 21:36
