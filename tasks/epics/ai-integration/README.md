# ğŸ¯ Epic: AI Agent å‰åç«¯é›†æˆ + å¤šæ¨¡å‹è°ƒåº¦

> **çŠ¶æ€**: â³ è¿›è¡Œä¸­  
> **åˆ›å»ºæ—¶é—´**: 2026-01-20 21:36  
> **æ‰§è¡Œæ—¶é—´**: è¿‡å¤œ (8-10å°æ—¶)

---

## ğŸ“ ç®€è¿°

å°† refactor_v2 å‰ç«¯è¿æ¥çœŸæ­£çš„ SmartAgent åç«¯ï¼Œå®ç°å¤š AI æ¨¡å‹ååŒå·¥ä½œã€‚åŒ…æ‹¬ï¼š
- å‰ç«¯ AI è¾“å…¥æ¡†è¿æ¥çœŸå® API
- æµå¼å“åº” (çœ‹åˆ° AI "æ‰“å­—")
- TODO è¿›åº¦æ˜¾ç¤º
- å¤šæ¨¡å‹è·¯ç”± (GLM/Grok/Qwen/DeepSeek)

---

## âœ… Done Definition

- [ ] å‰ç«¯ AI è¾“å…¥æ¡†èƒ½å‘é€æ¶ˆæ¯åˆ°åç«¯
- [ ] æ”¶åˆ° AI çœŸå®å“åº”å¹¶æ˜¾ç¤º
- [ ] æµå¼å“åº” - çœ‹åˆ° AI "æ‰“å­—" æ•ˆæœ
- [ ] TODO è¿›åº¦ - çœ‹åˆ°å·¥å…·è°ƒç”¨æ­¥éª¤
- [ ] å¤šæ¨¡å‹è·¯ç”± - ä¸åŒä»»åŠ¡ç”¨ä¸åŒæ¨¡å‹
- [ ] `pnpm check` é€šè¿‡

---

## ğŸ“Š å­ä»»åŠ¡

| ä»»åŠ¡ | Agent | æè¿° | Phase |
|------|-------|------|-------|
| GLM-001 | ğŸ”µ GLM | FloatingAIChatInput è¿æ¥çœŸå® API | P1 |
| GLM-002 | ğŸ”µ GLM | AIChatPanel åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç† | P1 |
| GLM-003 | ğŸ”µ GLM | Orchestrator æ¨¡å‹é€‰æ‹©å¢å¼º | P4 |
| CDX-001 | ğŸŸ¢ Codex | useAIStream hook å®ç° | P2 |
| CDX-002 | ğŸŸ¢ Codex | åç«¯ SSE æµå¼ç«¯ç‚¹ | P2 |
| CDX-003 | ğŸŸ¢ Codex | å¤šæ¨¡å‹è·¯ç”±ç³»ç»Ÿ model-router.ts | P3 |
| CDX-004 | ğŸŸ¢ Codex | é›†æˆå¤šæ¨¡å‹åˆ° llm.ts | P3 |

---

## ğŸ”„ æ‰§è¡Œé¡ºåº

```
Phase 1 (GLM) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GLM-001: FloatingAIChatInput è¿æ¥ API                     â”‚
â”‚  GLM-002: AIChatPanel åŠ è½½çŠ¶æ€                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 2 (Codex) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDX-001: useAIStream hook                                 â”‚
â”‚  CDX-002: åç«¯ SSE ç«¯ç‚¹                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 3 (Codex) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDX-003: model-router.ts                                  â”‚
â”‚  CDX-004: llm.ts é›†æˆ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
Phase 4 (GLM) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GLM-003: Orchestrator æ¨¡å‹é€‰æ‹©                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶æ‰€æœ‰æƒ

### ğŸ”µ GLM è´Ÿè´£
- `client/src/refactor_v2/components/FloatingAIChatInput.tsx`
- `client/src/refactor_v2/components/AIChatPanel.tsx`
- `client/src/refactor_v2/stores/aiChat.store.ts`
- `server/_core/agent/orchestrator.ts`

### ğŸŸ¢ Codex è´Ÿè´£
- `client/src/refactor_v2/api/useAIStream.ts` (æ–°å»º)
- `server/routers/ai.ts`
- `server/_core/model-router.ts` (æ–°å»º)
- `server/_core/llm.ts`

### âš ï¸ ç¦æ­¢äº¤å‰ä¿®æ”¹

---

## ğŸ“‚ ä»»åŠ¡æŒ‡å—

- **GLM ä»»åŠ¡æŒ‡å—**: `glm/GLM-TASK-GUIDE.md`
- **Codex ä»»åŠ¡æŒ‡å—**: `codex/CODEX-TASK-GUIDE.md`

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

æ‰€æœ‰ API Key å·²ç¡®è®¤é…ç½®:
- âœ… `GLM_API_KEY` - æ™ºè°± GLM-4.7
- âœ… `GROK_API_KEY` - xAI Grok-4.1
- âœ… `SILICONFLOW_API_KEY` - ç¡…åŸºæµåŠ¨ (Qwen/DeepSeek)

---

**ç»´æŠ¤è€…**: Antigravity  
**æœ€åæ›´æ–°**: 2026-01-20 21:36
