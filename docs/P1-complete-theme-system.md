# DragonFly ä¸»é¢˜ç³»ç»Ÿå®Œæ•´è®¾è®¡

> **ç›®æ ‡**ï¼šå»ºç«‹çµæ´»çš„å¤šä¸»é¢˜ç³»ç»Ÿï¼Œæ”¯æŒä¸»é¢˜åˆ‡æ¢ã€æ‰©å±•ã€æŒä¹…åŒ–  
> **å½“å‰çŠ¶æ€**ï¼šå·²æœ‰å¤šä¸ªä¸»é¢˜è®¾è®¡ï¼Œä½†ç¼ºå°‘ç»Ÿä¸€çš„ç®¡ç†æ¶æ„  
> **æ›´æ–°æ—¶é—´**ï¼š2026-01-20

---

## ğŸ“ ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸»é¢˜æ¶æ„è®¾è®¡

### 1.1 ä¸»é¢˜ç³»ç»Ÿæ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ThemeProvider (React Context)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Theme Store (Zustand)               â”‚  â”‚
â”‚  â”‚  - å½“å‰ä¸»é¢˜ ID                        â”‚  â”‚
â”‚  â”‚  - ä¸»é¢˜åˆ—è¡¨å…ƒæ•°æ®                     â”‚  â”‚
â”‚  â”‚  - toggleTheme() åˆ‡æ¢æ–¹æ³•            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Theme Registry                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ pixel (åƒç´ é£)                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ modern (ç°ä»£é£)                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ dark (æš—é»‘é£)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ cyberpunk (èµ›åšæœ‹å…‹)             â”‚  â”‚
â”‚  â”‚  â””â”€ ...æ›´å¤šä¸»é¢˜                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CSS Variables (åŠ¨æ€æ³¨å…¥)             â”‚  â”‚
â”‚  â”‚  - colors (è‰²å½©ä½“ç³»)                 â”‚  â”‚
â”‚  â”‚  - typography (æ’ç‰ˆ)                 â”‚  â”‚
â”‚  â”‚  - spacing (é—´è·)                    â”‚  â”‚
â”‚  â”‚  - animations (åŠ¨ç”»)                 â”‚  â”‚
â”‚  â”‚  - shadows (é˜´å½±)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LocalStorage / IndexedDB (æŒä¹…åŒ–)   â”‚  â”‚
â”‚  â”‚  - ç”¨æˆ·åå¥½ä¸»é¢˜                      â”‚  â”‚
â”‚  â”‚  - è‡ªå®šä¹‰ä¸»é¢˜é…ç½®                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸»é¢˜æ•°æ®ç»“æ„å®šä¹‰

```typescript
// src/types/theme.ts

/**
 * å•ä¸ªä¸»é¢˜çš„å®Œæ•´å®šä¹‰
 */
export interface Theme {
  id: string;                    // ä¸»é¢˜å”¯ä¸€æ ‡è¯†
  name: string;                  // æ˜¾ç¤ºåç§°
  label: string;                 // ä¸­æ–‡æ ‡ç­¾
  description?: string;          // ä¸»é¢˜æè¿°
  category: 'pixel' | 'modern' | 'dark' | 'custom';
  
  // è‰²å½©ä½“ç³»
  colors: {
    // åŸå§‹è‰²å½©
    primary: string;             // ä¸»è‰²
    secondary: string;           // æ¬¡ä¸»è‰²
    success: string;             // æˆåŠŸè‰²
    danger: string;              // å±é™©è‰²
    warning: string;             // è­¦å‘Šè‰²
    info: string;                // ä¿¡æ¯è‰²
    
    // èƒŒæ™¯ä¸æ–‡æœ¬
    background: string;          // èƒŒæ™¯è‰²
    surface: string;             // è¡¨é¢è‰²
    text: {
      primary: string;
      secondary: string;
      muted: string;
    };
    
    // è¾¹æ¡†ä¸åˆ†å‰²çº¿
    border: string;
    divider: string;
    
    // è‚¡ç¥¨è¡Œæƒ…ç‰¹å®šè‰²
    up: string;                  // ä¸Šæ¶¨è‰²
    down: string;                // ä¸‹è·Œè‰²
    neutral: string;             // ä¸­æ€§è‰²
    
    // é€æ˜åº¦å˜ä½“
    rgb: {
      primary: string;           // R,G,B æ ¼å¼ç”¨äº rgba
      secondary: string;
      up: string;
      down: string;
    };
  };
  
  // æ’ç‰ˆç³»ç»Ÿ
  typography: {
    fontFamily: {
      base: string;
      mono: string;
      display: string;
    };
    fontSize: {
      xs: string;
      sm: string;
      base: string;
      lg: string;
      xl: string;
      '2xl': string;
      '3xl': string;
    };
    fontWeight: {
      light: number;
      normal: number;
      medium: number;
      semibold: number;
      bold: number;
    };
    lineHeight: {
      tight: number;
      normal: number;
      relaxed: number;
    };
  };
  
  // é—´è·ç³»ç»Ÿ
  spacing: {
    xs: string;
    sm: string;
    md: string;
    lg: string;
    xl: string;
    '2xl': string;
  };
  
  // åœ†è§’ç³»ç»Ÿ
  radius: {
    none: string;
    sm: string;
    md: string;
    lg: string;
    full: string;
  };
  
  // é˜´å½±ç³»ç»Ÿ
  shadows: {
    none: string;
    sm: string;
    md: string;
    lg: string;
    xl: string;
  };
  
  // åŠ¨ç”»ç³»ç»Ÿ
  animations: {
    duration: {
      fast: string;
      normal: string;
      slow: string;
    };
    easing: {
      linear: string;
      ease: string;
      easeIn: string;
      easeOut: string;
      easeInOut: string;
    };
  };
  
  // ç‰¹å®šäºè¯¥ä¸»é¢˜çš„é™„åŠ é…ç½®
  extras?: {
    [key: string]: any;
  };
}

/**
 * ä¸»é¢˜å…ƒæ•°æ®ï¼ˆç”¨äºä¸»é¢˜é€‰æ‹©å™¨ï¼‰
 */
export interface ThemeMetadata {
  id: string;
  name: string;
  label: string;
  category: Theme['category'];
  icon?: string;
  preview?: string;        // é¢„è§ˆå›¾ URL
  author?: string;
}

/**
 * ä¸»é¢˜ä¸Šä¸‹æ–‡å€¼
 */
export interface ThemeContextValue {
  currentTheme: Theme;
  themeId: string;
  availableThemes: ThemeMetadata[];
  setTheme: (themeId: string) => void;
  updateThemeVariable: (key: string, value: string) => void;
}
```

---

## ğŸ¨ ç¬¬äºŒéƒ¨åˆ†ï¼šä¸»é¢˜å®šä¹‰

### 2.1 åƒç´ é£ä¸»é¢˜ (Pixel Theme)

```typescript
// src/themes/pixel.theme.ts

import { Theme } from '@/types/theme';

export const pixelTheme: Theme = {
  id: 'pixel',
  name: 'Pixel',
  label: 'åƒç´ é£',
  category: 'pixel',
  description: 'å¤å¤åƒç´ è‰ºæœ¯é£æ ¼ï¼Œ8-16ä½ç¾å­¦ç»“åˆç°ä»£è®¾è®¡',

  colors: {
    primary: '#6d2d95',           // ç´«è‰²ä¸»è‰²
    secondary: '#00d4ff',         // éœ“è™¹é’
    success: '#00ff00',           // åƒç´ ç»¿
    danger: '#ff0055',            // åƒç´ çº¢
    warning: '#ffff00',           // åƒç´ é»„
    info: '#00d4ff',              // ä¿¡æ¯é’

    background: '#0a0e27',        // æ·±ç©ºé»‘
    surface: '#1a1f3a',           // æš—ç° 1
    text: {
      primary: '#ffffff',
      secondary: '#8896b8',
      muted: '#5a6580',
    },

    border: '#3a4560',            // æš—ç° 3
    divider: '#3a4560',

    up: '#00ff00',
    down: '#ff0055',
    neutral: '#ffff00',

    rgb: {
      primary: '109, 45, 149',
      secondary: '0, 212, 255',
      up: '0, 255, 0',
      down: '255, 0, 85',
    },
  },

  typography: {
    fontFamily: {
      base: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",
      mono: "'Courier New', 'IBM Plex Mono', monospace",
      display: "'Press Start 2P', monospace",
    },
    fontSize: {
      xs: '11px',
      sm: '12px',
      base: '14px',
      lg: '16px',
      xl: '18px',
      '2xl': '20px',
      '3xl': '24px',
    },
    fontWeight: {
      light: 300,
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
    lineHeight: {
      tight: 1.2,
      normal: 1.5,
      relaxed: 1.75,
    },
  },

  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '24px',
    '2xl': '32px',
  },

  radius: {
    none: '0',
    sm: '2px',
    md: '4px',
    lg: '6px',
    full: '9999px',
  },

  shadows: {
    none: 'none',
    sm: '1px 1px 0px rgba(0, 0, 0, 0.2)',
    md: '2px 2px 0px rgba(0, 212, 255, 0.3)',
    lg: '4px 4px 0px rgba(109, 45, 149, 0.2)',
    xl: '6px 6px 0px rgba(0, 0, 0, 0.3)',
  },

  animations: {
    duration: {
      fast: '0.1s',
      normal: '0.3s',
      slow: '0.5s',
    },
    easing: {
      linear: 'linear',
      ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    },
  },

  extras: {
    pixelBorder: '2px solid',
    pixelShadow: '2px 2px 0px',
    scanlineOpacity: '0.15',
  },
};
```

### 2.2 ç°ä»£é£ä¸»é¢˜ (Modern Theme)

```typescript
// src/themes/modern.theme.ts

import { Theme } from '@/types/theme';

export const modernTheme: Theme = {
  id: 'modern',
  name: 'Modern',
  label: 'ç°ä»£é£',
  category: 'modern',
  description: 'ç®€æ´ç°ä»£è®¾è®¡ï¼Œå¼ºè°ƒåŠŸèƒ½æ€§å’Œæ˜“ç”¨æ€§',

  colors: {
    primary: '#3b82f6',           // è“è‰²
    secondary: '#06b6d4',         // é’è‰²
    success: '#10b981',           // ç»¿è‰²
    danger: '#ef4444',            // çº¢è‰²
    warning: '#f59e0b',           // ç¥ç€è‰²
    info: '#06b6d4',

    background: '#ffffff',
    surface: '#f9fafb',
    text: {
      primary: '#111827',
      secondary: '#6b7280',
      muted: '#9ca3af',
    },

    border: '#e5e7eb',
    divider: '#e5e7eb',

    up: '#10b981',
    down: '#ef4444',
    neutral: '#f59e0b',

    rgb: {
      primary: '59, 130, 246',
      secondary: '6, 182, 212',
      up: '16, 185, 129',
      down: '239, 68, 68',
    },
  },

  typography: {
    fontFamily: {
      base: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",
      mono: "'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace",
      display: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",
    },
    fontSize: {
      xs: '12px',
      sm: '13px',
      base: '14px',
      lg: '16px',
      xl: '18px',
      '2xl': '20px',
      '3xl': '24px',
    },
    fontWeight: {
      light: 300,
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
    lineHeight: {
      tight: 1.25,
      normal: 1.5,
      relaxed: 1.75,
    },
  },

  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '24px',
    '2xl': '32px',
  },

  radius: {
    none: '0',
    sm: '4px',
    md: '8px',
    lg: '12px',
    full: '9999px',
  },

  shadows: {
    none: 'none',
    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
    md: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
    xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1)',
  },

  animations: {
    duration: {
      fast: '0.15s',
      normal: '0.25s',
      slow: '0.35s',
    },
    easing: {
      linear: 'linear',
      ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    },
  },
};
```

### 2.3 æš—é»‘é£ä¸»é¢˜ (Dark Theme)

```typescript
// src/themes/dark.theme.ts

import { Theme } from '@/types/theme';

export const darkTheme: Theme = {
  id: 'dark',
  name: 'Dark',
  label: 'æš—é»‘é£',
  category: 'dark',
  description: 'æ·±è‰²ç³»è®¾è®¡ï¼Œé€‚åˆé•¿æ—¶é—´ä½¿ç”¨',

  colors: {
    primary: '#8b5cf6',           // ç´«è‰²
    secondary: '#64748b',         // çŸ³æ¿ç°
    success: '#34d399',           // ç¿¡ç¿ ç»¿
    danger: '#f87171',            // æµ…çº¢
    warning: '#fbbf24',           // æµ…ç¥ç€
    info: '#38bdf8',

    background: '#0f172a',        // æ·±è“é»‘
    surface: '#1e293b',           // çŸ³æ¿ 800
    text: {
      primary: '#f1f5f9',
      secondary: '#cbd5e1',
      muted: '#94a3b8',
    },

    border: '#334155',            // çŸ³æ¿ 700
    divider: '#334155',

    up: '#34d399',
    down: '#f87171',
    neutral: '#fbbf24',

    rgb: {
      primary: '139, 92, 246',
      secondary: '100, 116, 139',
      up: '52, 211, 153',
      down: '248, 113, 113',
    },
  },

  typography: {
    fontFamily: {
      base: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",
      mono: "'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace",
      display: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",
    },
    fontSize: {
      xs: '12px',
      sm: '13px',
      base: '14px',
      lg: '16px',
      xl: '18px',
      '2xl': '20px',
      '3xl': '24px',
    },
    fontWeight: {
      light: 300,
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
    lineHeight: {
      tight: 1.25,
      normal: 1.5,
      relaxed: 1.75,
    },
  },

  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '24px',
    '2xl': '32px',
  },

  radius: {
    none: '0',
    sm: '4px',
    md: '8px',
    lg: '12px',
    full: '9999px',
  },

  shadows: {
    none: 'none',
    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.3)',
    md: '0 4px 6px -1px rgba(0, 0, 0, 0.4)',
    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.5)',
    xl: '0 20px 25px -5px rgba(0, 0, 0, 0.6)',
  },

  animations: {
    duration: {
      fast: '0.15s',
      normal: '0.25s',
      slow: '0.35s',
    },
    easing: {
      linear: 'linear',
      ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    },
  },
};
```

### 2.4 èµ›åšæœ‹å…‹ä¸»é¢˜ (Cyberpunk Theme)

```typescript
// src/themes/cyberpunk.theme.ts

import { Theme } from '@/types/theme';

export const cyberpunkTheme: Theme = {
  id: 'cyberpunk',
  name: 'Cyberpunk',
  label: 'èµ›åšæœ‹å…‹',
  category: 'custom',
  description: 'éœ“è™¹ç¯é£æ ¼ï¼Œé«˜å¯¹æ¯”åº¦ï¼Œæå®¢æ„Ÿåè¶³',

  colors: {
    primary: '#ff006e',           // éœ“è™¹ç²‰
    secondary: '#00f5ff',         // éœ“è™¹é’
    success: '#39ff14',           // éœ“è™¹ç»¿
    danger: '#ff006e',            // éœ“è™¹ç²‰
    warning: '#ffbe0b',           // éœ“è™¹é»„
    info: '#00f5ff',

    background: '#0d0221',        // æé»‘
    surface: '#1f0747',           // æ·±ç´«
    text: {
      primary: '#ff006e',         // ç”¨ä¸»è‰²ä½œä¸ºæ–‡æœ¬
      secondary: '#00f5ff',
      muted: '#8338ec',
    },

    border: '#ff006e',
    divider: '#00f5ff',

    up: '#39ff14',
    down: '#ff006e',
    neutral: '#ffbe0b',

    rgb: {
      primary: '255, 0, 110',
      secondary: '0, 245, 255',
      up: '57, 255, 20',
      down: '255, 0, 110',
    },
  },

  typography: {
    fontFamily: {
      base: "'Orbitron', 'Courier New', monospace",
      mono: "'Space Mono', monospace",
      display: "'Orbitron', monospace",
    },
    fontSize: {
      xs: '11px',
      sm: '12px',
      base: '14px',
      lg: '16px',
      xl: '18px',
      '2xl': '20px',
      '3xl': '24px',
    },
    fontWeight: {
      light: 300,
      normal: 400,
      medium: 500,
      semibold: 700,
      bold: 900,
    },
    lineHeight: {
      tight: 1.1,
      normal: 1.4,
      relaxed: 1.6,
    },
  },

  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '24px',
    '2xl': '32px',
  },

  radius: {
    none: '0',
    sm: '0',
    md: '2px',
    lg: '4px',
    full: '0',
  },

  shadows: {
    none: 'none',
    sm: '0 0 10px rgba(255, 0, 110, 0.3)',
    md: '0 0 20px rgba(0, 245, 255, 0.3)',
    lg: '0 0 40px rgba(255, 0, 110, 0.5)',
    xl: '0 0 60px rgba(0, 245, 255, 0.6)',
  },

  animations: {
    duration: {
      fast: '0.08s',
      normal: '0.2s',
      slow: '0.4s',
    },
    easing: {
      linear: 'linear',
      ease: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
      easeIn: 'cubic-bezier(0.42, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.58, 1)',
      easeInOut: 'cubic-bezier(0.42, 0, 0.58, 1)',
    },
  },

  extras: {
    glowEffect: 'text-shadow: 0 0 10px',
    borderStyle: 'dashed',
  },
};
```

---

## ğŸ”§ ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸»é¢˜ç®¡ç†ç³»ç»Ÿ

### 3.1 ä¸»é¢˜ Store (Zustand)

```typescript
// src/store/theme.store.ts

import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import { Theme, ThemeMetadata } from '@/types/theme';
import { pixelTheme, modernTheme, darkTheme, cyberpunkTheme } from '@/themes';

interface ThemeStoreState {
  // çŠ¶æ€
  currentTheme: Theme;
  themeId: string;
  availableThemes: ThemeMetadata[];
  customThemes: Map<string, Theme>;

  // æ–¹æ³•
  setTheme: (themeId: string) => void;
  registerTheme: (theme: Theme) => void;
  unregisterTheme: (themeId: string) => void;
  updateThemeVariable: (key: string, value: string) => void;
  exportTheme: (themeId: string) => string;
  importTheme: (themeJson: string) => void;
}

const THEME_REGISTRY = new Map<string, Theme>([
  ['pixel', pixelTheme],
  ['modern', modernTheme],
  ['dark', darkTheme],
  ['cyberpunk', cyberpunkTheme],
]);

export const useThemeStore = create<ThemeStoreState>()(
  persist(
    (set, get) => ({
      currentTheme: pixelTheme,
      themeId: 'pixel',
      availableThemes: Array.from(THEME_REGISTRY.values()).map((t) => ({
        id: t.id,
        name: t.name,
        label: t.label,
        category: t.category,
      })),
      customThemes: new Map(),

      setTheme: (themeId: string) => {
        const theme = THEME_REGISTRY.get(themeId) || get().customThemes.get(themeId);
        if (theme) {
          set({ currentTheme: theme, themeId });
          applyThemeToDom(theme);
        }
      },

      registerTheme: (theme: Theme) => {
        THEME_REGISTRY.set(theme.id, theme);
        const state = get();
        set({
          availableThemes: [
            ...state.availableThemes,
            {
              id: theme.id,
              name: theme.name,
              label: theme.label,
              category: theme.category,
            },
          ],
        });
      },

      unregisterTheme: (themeId: string) => {
        if (themeId === get().themeId) {
          get().setTheme('pixel'); // åˆ‡å›é»˜è®¤ä¸»é¢˜
        }
        THEME_REGISTRY.delete(themeId);
      },

      updateThemeVariable: (key: string, value: string) => {
        const root = document.documentElement;
        root.style.setProperty(`--${key}`, value);
      },

      exportTheme: (themeId: string) => {
        const theme = THEME_REGISTRY.get(themeId) || get().customThemes.get(themeId);
        if (!theme) throw new Error(`Theme ${themeId} not found`);
        return JSON.stringify(theme, null, 2);
      },

      importTheme: (themeJson: string) => {
        try {
          const theme = JSON.parse(themeJson) as Theme;
          get().registerTheme(theme);
        } catch (error) {
          console.error('Failed to import theme:', error);
        }
      },
    }),
    {
      name: 'theme-store',
      partialize: (state) => ({
        themeId: state.themeId,
      }),
    }
  )
);

/**
 * å°†ä¸»é¢˜åº”ç”¨åˆ° DOM
 */
function applyThemeToDom(theme: Theme) {
  const root = document.documentElement;

  // åº”ç”¨é¢œè‰²å˜é‡
  Object.entries(theme.colors).forEach(([key, value]) => {
    if (typeof value === 'object') {
      Object.entries(value).forEach(([subKey, subValue]) => {
        root.style.setProperty(`--color-${key}-${subKey}`, String(subValue));
      });
    } else {
      root.style.setProperty(`--color-${key}`, value);
    }
  });

  // åº”ç”¨æ’ç‰ˆå˜é‡
  Object.entries(theme.typography.fontFamily).forEach(([key, value]) => {
    root.style.setProperty(`--font-${key}`, value);
  });

  Object.entries(theme.typography.fontSize).forEach(([key, value]) => {
    root.style.setProperty(`--font-size-${key}`, value);
  });

  // åº”ç”¨é—´è·ã€åœ†è§’ã€é˜´å½±ç­‰
  Object.entries(theme.spacing).forEach(([key, value]) => {
    root.style.setProperty(`--spacing-${key}`, value);
  });

  Object.entries(theme.radius).forEach(([key, value]) => {
    root.style.setProperty(`--radius-${key}`, value);
  });

  Object.entries(theme.shadows).forEach(([key, value]) => {
    root.style.setProperty(`--shadow-${key}`, value);
  });

  // åº”ç”¨åŠ¨ç”»
  Object.entries(theme.animations.duration).forEach(([key, value]) => {
    root.style.setProperty(`--duration-${key}`, value);
  });

  // é¢å¤–é…ç½®
  if (theme.extras) {
    Object.entries(theme.extras).forEach(([key, value]) => {
      root.style.setProperty(`--extra-${key}`, String(value));
    });
  }

  // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶
  window.dispatchEvent(
    new CustomEvent('themechange', { detail: { theme } })
  );
}
```

### 3.2 ä¸»é¢˜ Provider

```typescript
// src/components/ThemeProvider.tsx

import React, { createContext, useContext, useEffect } from 'react';
import { useThemeStore } from '@/store/theme.store';
import { ThemeContextValue } from '@/types/theme';

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({
  children,
}) => {
  const {
    currentTheme,
    themeId,
    availableThemes,
    setTheme,
    updateThemeVariable,
  } = useThemeStore();

  useEffect(() => {
    // åº”ç”¨åˆå§‹ä¸»é¢˜
    setTheme(themeId);

    // ç›‘å¬ç³»ç»Ÿæ·±è‰²æ¨¡å¼å˜åŒ–ï¼ˆå¯é€‰ï¼‰
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handleChange = (e: MediaQueryListEvent) => {
      if (themeId === 'auto') {
        setTheme(e.matches ? 'dark' : 'modern');
      }
    };

    mediaQuery.addEventListener('change', handleChange);
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, []);

  const value: ThemeContextValue = {
    currentTheme,
    themeId,
    availableThemes,
    setTheme,
    updateThemeVariable,
  };

  return (
    <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};
```

---

## ğŸ® ç¬¬å››éƒ¨åˆ†ï¼šä¸»é¢˜åˆ‡æ¢ç»„ä»¶

### 4.1 ä¸»é¢˜é€‰æ‹©å™¨

```typescript
// src/components/ThemeSelector.tsx

import React from 'react';
import { useTheme } from '@/components/ThemeProvider';
import './ThemeSelector.css';

export const ThemeSelector: React.FC = () => {
  const { currentTheme, availableThemes, setTheme } = useTheme();

  return (
    <div className="theme-selector">
      <div className="theme-selector-label">ä¸»é¢˜</div>
      <div className="theme-selector-grid">
        {availableThemes.map((themeMetadata) => (
          <button
            key={themeMetadata.id}
            className={`theme-option ${
              currentTheme.id === themeMetadata.id ? 'active' : ''
            }`}
            onClick={() => setTheme(themeMetadata.id)}
            title={themeMetadata.label}
          >
            <span className="theme-name">{themeMetadata.label}</span>
          </button>
        ))}
      </div>
    </div>
  );
};
```

```css
/* src/components/ThemeSelector.css */

.theme-selector {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
}

.theme-selector-label {
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-text-primary);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.theme-selector-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-sm);
}

.theme-option {
  padding: var(--spacing-md);
  background: var(--color-background);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-standard);
  font-size: var(--font-size-sm);
}

.theme-option:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  box-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.3);
}

.theme-option.active {
  border-color: var(--color-primary);
  background: rgba(var(--color-primary-rgb), 0.1);
  color: var(--color-primary);
  font-weight: 600;
}
```

---

## ğŸ“‚ ç¬¬äº”éƒ¨åˆ†ï¼šæ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ themes/                     # ä¸»é¢˜å®šä¹‰
â”‚   â”œâ”€â”€ index.ts               # å¯¼å‡ºæ‰€æœ‰ä¸»é¢˜
â”‚   â”œâ”€â”€ pixel.theme.ts         # åƒç´ é£ä¸»é¢˜
â”‚   â”œâ”€â”€ modern.theme.ts        # ç°ä»£é£ä¸»é¢˜
â”‚   â”œâ”€â”€ dark.theme.ts          # æš—é»‘é£ä¸»é¢˜
â”‚   â”œâ”€â”€ cyberpunk.theme.ts     # èµ›åšæœ‹å…‹ä¸»é¢˜
â”‚   â””â”€â”€ custom.theme.ts        # è‡ªå®šä¹‰ä¸»é¢˜æ¨¡æ¿
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ theme.ts               # ä¸»é¢˜ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ store/
â”‚   â””â”€â”€ theme.store.ts         # ä¸»é¢˜çŠ¶æ€ç®¡ç†
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ThemeProvider.tsx      # ä¸»é¢˜æä¾›è€…
â”‚   â”œâ”€â”€ ThemeSelector.tsx      # ä¸»é¢˜é€‰æ‹©å™¨ç»„ä»¶
â”‚   â””â”€â”€ ThemeSelector.css
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ globals.css            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ theme-base.css         # ä¸»é¢˜åŸºç¡€å˜é‡
â”‚   â””â”€â”€ animations.css         # åŠ¨ç”»å®šä¹‰
â”‚
â””â”€â”€ App.tsx                    # ä½¿ç”¨ ThemeProvider åŒ…è£¹
```

---

## ğŸ’¾ ç¬¬å…­éƒ¨åˆ†ï¼šä½¿ç”¨ç¤ºä¾‹

### 6.1 åº”ç”¨å¯åŠ¨

```typescript
// src/App.tsx

import React from 'react';
import { ThemeProvider } from '@/components/ThemeProvider';
import { ThemeSelector } from '@/components/ThemeSelector';
import { LayoutShell } from '@/components/LayoutShell';

export const App: React.FC = () => {
  return (
    <ThemeProvider>
      <div className="app">
        {/* å³ä¸Šè§’ä¸»é¢˜é€‰æ‹©å™¨ */}
        <div className="app-header">
          <ThemeSelector />
        </div>

        {/* ä¸»åº”ç”¨å†…å®¹ */}
        <LayoutShell
          left={/* ... */}
          centerTop={/* ... */}
          centerBottom={/* ... */}
          right={/* ... */}
        />
      </div>
    </ThemeProvider>
  );
};

export default App;
```

### 6.2 è‡ªå®šä¹‰ä¸»é¢˜

```typescript
// åˆ›å»ºæ–°ä¸»é¢˜
import { Theme } from '@/types/theme';
import { useThemeStore } from '@/store/theme.store';

const myCustomTheme: Theme = {
  id: 'my-custom',
  name: 'My Custom Theme',
  label: 'æˆ‘çš„è‡ªå®šä¹‰ä¸»é¢˜',
  category: 'custom',
  // ... é…ç½®çœç•¥
};

// åœ¨ç»„ä»¶ä¸­æ³¨å†Œ
const { registerTheme } = useThemeStore();
registerTheme(myCustomTheme);
```

### 6.3 åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜

```typescript
import { useTheme } from '@/components/ThemeProvider';

export const MyComponent: React.FC = () => {
  const { currentTheme } = useTheme();

  return (
    <div
      style={{
        backgroundColor: currentTheme.colors.background,
        color: currentTheme.colors.text.primary,
      }}
    >
      {/* ä½¿ç”¨ä¸»é¢˜é…ç½® */}
    </div>
  );
};
```

---

## ğŸ”„ ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸»é¢˜åˆ‡æ¢æµç¨‹

```
ç”¨æˆ·é€‰æ‹©ä¸»é¢˜
    â†“
ThemeSelector è°ƒç”¨ setTheme(themeId)
    â†“
useThemeStore.setTheme() æ›´æ–°çŠ¶æ€
    â†“
applyThemeToDom() æ³¨å…¥ CSS å˜é‡
    â†“
window.dispatchEvent('themechange')
    â†“
æ‰€æœ‰ç›‘å¬ 'themechange' çš„ç»„ä»¶é‡æ–°æ¸²æŸ“
    â†“
localStorage è‡ªåŠ¨ä¿å­˜ä¸»é¢˜ IDï¼ˆpersistï¼‰
    â†“
ä¸‹æ¬¡æ‰“å¼€åº”ç”¨è‡ªåŠ¨åŠ è½½ä¸Šæ¬¡é€‰æ‹©çš„ä¸»é¢˜
```

---

## âœ… P1-24 ä¸»é¢˜ç³»ç»Ÿå®Œæ•´å»ºç«‹æ¸…å•

```
ä¸»é¢˜å®šä¹‰ï¼š
â”œâ”€ [ ] pixel.theme.ts å®Œæˆ
â”œâ”€ [ ] modern.theme.ts å®Œæˆ
â”œâ”€ [ ] dark.theme.ts å®Œæˆ
â”œâ”€ [ ] cyberpunk.theme.ts å®Œæˆ
â””â”€ [ ] é¢å¤–ä¸»é¢˜ï¼ˆ2-3ä¸ªï¼‰

ä¸»é¢˜ç®¡ç†ï¼š
â”œâ”€ [ ] theme.store.ts å®ç°
â”œâ”€ [ ] ThemeProvider å®ç°
â”œâ”€ [ ] useTheme Hook å¯ç”¨
â”œâ”€ [ ] ä¸»é¢˜æŒä¹…åŒ–å·¥ä½œ
â””â”€ [ ] ä¸»é¢˜å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

UI ç»„ä»¶ï¼š
â”œâ”€ [ ] ThemeSelector ç»„ä»¶å®Œæˆ
â”œâ”€ [ ] CSS å˜é‡ç³»ç»Ÿåº”ç”¨
â”œâ”€ [ ] æ‰€æœ‰ç»„ä»¶æ”¯æŒä¸»é¢˜åˆ‡æ¢
â””â”€ [ ] æš—å…‰æ¨¡å¼è‡ªåŠ¨é€‚é…

æµ‹è¯•ï¼š
â”œâ”€ [ ] ä¸»é¢˜åˆ‡æ¢æ— é—ªçƒ
â”œâ”€ [ ] æ‰€æœ‰é¡µé¢ä¸»é¢˜æ­£ç¡®åº”ç”¨
â”œâ”€ [ ] localStorage ä¿å­˜ä¸»é¢˜åå¥½
â”œâ”€ [ ] æ–°å»ºè‡ªå®šä¹‰ä¸»é¢˜å¯ç”¨
â””â”€ [ ] ä¸»é¢˜å¯¼å‡ºçš„ JSON å¯å†å¯¼å…¥
```

---

## ğŸ“ˆ è¿›é˜¶åŠŸèƒ½ï¼ˆåç»­å¯é€‰ï¼‰

```
1. ä¸»é¢˜ç¼–è¾‘å™¨
   - å¯è§†åŒ–è°ƒæ•´é¢œè‰²
   - å®æ—¶é¢„è§ˆ
   - å¯¼å‡ºè‡ªå®šä¹‰ä¸»é¢˜

2. ä¸»é¢˜å¸‚åœº
   - ç”¨æˆ·åˆ†äº«ä¸»é¢˜
   - ä¸‹è½½ç¬¬ä¸‰æ–¹ä¸»é¢˜
   - ä¸»é¢˜è¯„åˆ†ç³»ç»Ÿ

3. åŠ¨æ€ä¸»é¢˜
   - æ ¹æ®æ—¶é—´è‡ªåŠ¨åˆ‡æ¢ï¼ˆæ—¥é—´/å¤œé—´ï¼‰
   - æ ¹æ®ç¯å¢ƒäº®åº¦è‡ªåŠ¨é€‚é…
   - èåˆå¤šä¸ªä¸»é¢˜å…ƒç´ 

4. ä¸»é¢˜åŠ¨ç”»
   - å¹³æ»‘è¿‡æ¸¡æ•ˆæœ
   - é¢œè‰²æ¸å˜åˆ‡æ¢
   - è¿‡æ¸¡æŒç»­æ—¶é—´é…ç½®
```

---

**P1-24 ä¸»é¢˜ç³»ç»Ÿå®Œæˆï¼** ğŸ‰

ç°åœ¨ä½ æœ‰äº†ï¼š
- âœ… 4 ä¸ªå®Œæ•´çš„ä¸»é¢˜å®šä¹‰
- âœ… çµæ´»çš„ä¸»é¢˜ç®¡ç†ç³»ç»Ÿ
- âœ… æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜
- âœ… ä¸»é¢˜æŒä¹…åŒ–å­˜å‚¨
- âœ… ä¸»é¢˜é€‰æ‹© UI
- âœ… å¯æ‰©å±•çš„æ¶æ„

æ¥ä¸‹æ¥å¯ä»¥ç»§ç»­åšï¼š
1. **K çº¿å›¾é›†æˆ** (P1-01~05)
2. **å®æ—¶æ•°æ®æ¶æ„** (P1-06~10)
3. **æ€§èƒ½ä¼˜åŒ–** (P1-24 è¡¥å……)

